<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <ul>
        <li><input type="checkbox" id="all" onclick="allFunction()" value="전체선택">전체선택</li>
        <li><input type="checkbox" id="base" onclick="baseFunction()" value="야구">야구</li>
        <li><input type="checkbox" id="foot" onclick="footFunction()" value="축구">축구</li>
        <li><input type="checkbox" id="basket" onclick="basketFunction()" value="농구">농구</li>
        <li><input type="checkbox" id="table" onclick="tableFunction()" value="탁구">탁구</li>
    </ul> 

    <textarea id="memo" cols="30" rows="10"></textarea>

    <script>
        var memo = document.getElementById('memo')
        var allFlag = false
        var baseFlag = false
        var footFlag = false
        var basketFlag = false
        var tableFlag = false

        function allFunction() {
            allFlag = !allFlag
            if(allFlag) {
                // 만약 사용자가 홀수번째로 누른 것이면 flag의 상태를 확인하며 출력하지 않은 값들만 새롭게 textarea에 출력한다.
                if(!baseFlag) { memo.innerHTML += document.getElementById('base').value + "\n" }
                if(!footFlag) { memo.innerHTML += document.getElementById('foot').value + "\n" }
                if(!basketFlag) { memo.innerHTML += document.getElementById('basket').value + "\n" }
                if(!tableFlag) { memo.innerHTML += document.getElementById('table').value + "\n" }
            } else {
                // 만약 사용자가 짝수번쨰로 누른 것이면 textarea의 모든 내용을 지운다.
                memo.innerHTML = ""
                // textarea를 지운 후, 각 flag의 상태를 확인하며 check되어 있으면 unchecked로 바꾼다.
                if(baseFlag) { document.getElementById('base').click() }
                if(footFlag) { document.getElementById('foot').click() }
                if(basketFlag) { document.getElementById('basket').click() }
                if(tableFlag) { document.getElementById('table').click() }
            }
        }


        // 사용자가 "야구"를 선택했을 경우 야구를 출력하고 삭제하는 함수
        function baseFunction() {
            baseFlag = !baseFlag
            var base = document.getElementById('base').value
            // 만약 baseFlag이 true이면 (사용자가 홀수번째로 누른 것이면) textarea에 "야구"를 출력
            if(baseFlag) { memo.innerHTML += base + "\n" }
            // 만약 사용자가 짝수번째로 누른 것이면 textarea에서 "야구"를 삭제
            else {
                memo.innerHTML = memo.innerHTML.replace(base+"\n", "")
            }
        }

        // 사용자가 "축구"를 선택했을 경우 야구를 출력하고 삭제하는 함수
        function footFunction() {
            footFlag = !footFlag
            var foot = document.getElementById('foot').value
            if(footFlag) { memo.innerHTML += foot + "\n" }
            else {
                memo.innerHTML = memo.innerHTML.replace(foot+"\n", "")
            }
        }

        function basketFunction() {
            basketFlag = !basketFlag
            var basket = document.getElementById('basket').value
            if(basketFlag) { memo.innerHTML += basket + "\n" }
            else {
                memo.innerHTML = memo.innerHTML.replace(basket+"\n", "")
            }
        }

        function tableFunction() {
            tableFlag = !tableFlag
            var table = document.getElementById('table').value
            if(tableFlag) { memo.innerHTML += table + "\n" }
            else {
                memo.innerHTML = memo.innerHTML.replace(table+"\n", "")
            }
        }
    </script>
</body>
</html>