<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Select_Multiple</title>
    
    <link rel="stylesheet" href="../../style/selectMultiple.css">
</head>
<body>
    <form action="">
        <select name="chooser" id="chooser" multiple size="10">
            <option value="농구" id="basket" onclick="addBasketball()">농구</option>
            <option value="야구" id="base" onclick="addBaseball()">야구</option>
            <option value="축구" id="foot" onclick="addFootball()">축구</option>
            <option value="탁구" id="table" onclick="addTableTennis()">탁구</option>
        </select>

        <ul>
            <li><button type="button" onclick="rightOne()">&gt;</button></li> <!-- Only this button has an event -->
            <li><button type="button">&lt;</button></li>
            <li><button type="button">&gt;&gt;</button></li>
            <li><button type="button">&lt;&lt;</button></li>
        </ul>

        <select name="catcher" id="catcher" multiple size="10"></select>

    </form>    

    <script>
        // 하나를 선택하면, 문자열에 더하기
        // 선택을 해제하면 문자열에서 지우기
        // 버튼을 누르면 문자열에서 꺼내서 옮기기
        var arr = new Array();
        var basketFlag = false;
        var baseFlag = false;
        var footFlag = false;
        var tableFlag = false;

        function addBasketball() {
            basketFlag = !basketFlag;
            var basket = document.getElementById('basket').value;
            if(basketFlag) { // If unchecked -> checked
                if(arr.indexOf("농구") != -1) { return; } // Do nothing if "농구" is already in the array 'arr'
                arr.push(basket);
                console.log(arr);
            } else { // If checked -> unchecked
                var find = arr.indexOf(basket);
                arr.splice(find,1);
                console.log(arr);
            }
        }

        function addBaseball() {
            baseFlag = !baseFlag;
            var base = document.getElementById('base').value;
            if(baseFlag) {
                if(arr.indexOf("야구") != -1) { return; }
                arr.push(base);
                console.log(arr);
            } else {
                var find = arr.indexOf(base);
                arr.splice(find,1);
                console.log(arr);
            }
        }

        function addFootball() {
            footFlag = !footFlag;
            var foot = document.getElementById('foot').value;
            if(footFlag) {
                if(arr.indexOf("축구") != -1) { return; }
                arr.push(foot);
                console.log(arr);
            } else {
                var find = arr.indexOf(foot);
                arr.splice(find,1);
                console.log(arr);
            }
        }

        function addTableTennis() {
            tableFlag = !tableFlag;
            var table = document.getElementById('table').value;
            if(tableFlag) {
                if(arr.indexOf("탁구") != -1) { return; }
                arr.push(table);
                console.log(arr);
            } else {
                var find = arr.indexOf(table);
                arr.splice(find,1);
                console.log(arr);
            }
        }

        function rightOne() {
            var catcher = document.getElementById("catcher");
            for(var i = 0; i < arr.length; i++) { // Empty rightside select
                catcher.remove(0);
            }
            for(var i = 0; i < arr.length; i++) { // Add to rightside select
                var option = document.createElement("option");
                option.text = arr[i];
                catcher.add(option);
            }

            var select = document.getElementById("chooser");
            for(var i = 0; i < select.options.length; i++) { // Remove from leftside select
                for(var j = 0; j < arr.length; j++) {
                    if(arr[j] === select.options[i].text) {
                        select.options[i] = null;
                    }
                }
            }
        }
    </script>
</body>
</html>